"use strict";(self.webpackChunksc_land=self.webpackChunksc_land||[]).push([[34429,95341],{19208:(e,t,s)=>{s.d(t,{A:()=>l});var i=s(6326),n=s(42553),r=s(46053),o=(s(81806),s(76460),s(47249),s(87990));let l=class extends n.o{constructor(e){super(e),this.type="wkb",this.primaryFieldName=null}};(0,i.Cg)([(0,r.MZ)({type:["wkb"],readOnly:!0,json:{write:!0}})],l.prototype,"type",void 0),(0,i.Cg)([(0,r.MZ)({json:{write:!0}})],l.prototype,"orientation",void 0),(0,i.Cg)([(0,r.MZ)({json:{write:!0}})],l.prototype,"primaryFieldName",void 0),l=(0,i.Cg)([(0,o.$)("esri.layers.support.ParquetEncodingWkb")],l)},30178:(e,t,s)=>{s.d(t,{hG:()=>h,nc:()=>m,sA:()=>f});var i=s(89379),n=(s(19276),s(50076)),r=s(45802),o=s(13312),l=s(44135),a=s(36035),u=s(98141),d=s(19208),p=s(67103);const c=new r.J({esriGeometryPoint:"point",esriGeometryPolygon:"polygon",esriGeometryPolyline:"polyline",esriGeometryMultipoint:"multipoint"});function f(e){return c.toJSON(e)}function h(e){return c.fromJSON(e)}async function m(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e.geometryType&&e.spatialReference&&e.encoding&&e.fields)return e;if(e.urls.length<1)throw new n.A("parquet:bad-input","At least one url must be specified",e);const s=await(0,p.DV)(e.urls.getItemAt(0),{getCustomParameters:()=>t.customParameters}),r=(0,p.hD)(s),c=(0,i.A)((0,i.A)({},e),{},{file:s});null==c.fields&&(c.fields=s.fields().map((e=>l.A.fromJSON({name:e.name,type:e.type})))),null==c.encoding&&(c.encoding=function(e,t){if(null!=e){var s;const t=e.primary_column,i=e.columns[t];return new d.A({primaryFieldName:t,orientation:null!==(s=i.orientation)&&void 0!==s?s:null})}const i=(0,a.i_)(t.map((e=>e.name)));return i.latitudeFieldName&&i.longitudeFieldName?new u.A({latitudeFieldName:i.latitudeFieldName,longitudeFieldName:i.longitudeFieldName}):null}(r,c.fields));const f=(0,p.Hj)(s);if(f)switch(f.mode){case"z":c.displayOptimization={mode:"z"};break;case"xz":{const e=f.multiscale;if(!e)throw new n.A("bad-format","XZ display optimization requires multiscale geometries");c.displayOptimization={mode:"xz",multiscale:e};break}}if(!c.encoding)return c;switch(c.encoding.type){case"location":null==c.spatialReference&&(c.spatialReference=o.A.WGS84),null==c.geometryType&&(c.geometryType="point");break;case"wkb":{if(!r)return c;const e=r.primary_column,t=r.columns[e];if(c.geometryType||(c.geometryType=function(e){const{geometry_types:t}=e,s=new Set;for(const i of t){const e=y(i);e&&s.add(e)}if(s.size>1)throw new n.A("unsupported","Parquet mixed geometry types are not support",{geometryTypes:s});return 1===s.size?s.values().next().value:void 0}(t)),c.spatialReference||(c.spatialReference=function(e){var t;const s=null===(t=e.crs)||void 0===t||null===(t=t.id)||void 0===t?void 0:t.code;return s&&"number"==typeof s?new o.A({wkid:s}):void 0}(t)),c.fields)for(const s of Object.keys(r.columns))c.fields=c.fields.filter((e=>e.name!==s))}}return c}function y(e){switch(e){case"Point":return"point";case"Polygon":case"MultiPolygon":return"polygon";case"LineString":return"polyline";case"MultiPoint":return"multipoint";default:return null}}},34429:(e,t,s)=>{s.d(t,{QueueProcessor:()=>d});var i=s(30726),n=s(50346),r=s(59649),o=s(67993),l=s(52394),a=s(75540);class u{constructor(e,t){this.item=e,this.controller=t,this.promise=null}}class d{constructor(e){this._schedule=null,this._deferreds=new o.A,this._controllers=new o.A,this._processingItems=new o.A,this._pausedSignal=(0,a.v)(!1),this.concurrency=1,e.concurrency&&(this.concurrency=e.concurrency),this._queue=new r.A(e.peeker),this.process=e.process}destroy(){this.clear(),this._schedule=(0,i.xt)(this._schedule)}get updating(){return this.running}get length(){return this._processingItems.size+this._queue.length}get running(){return!this._pausedSignal.value&&this._queue.length>0&&this._processingItems.size<this.concurrency}abort(e){const t=this._controllers.get(e);t&&t.abort()}clear(){this._queue.clear();const e=[];this._controllers.forEach((t=>e.push(t))),this._controllers.clear(),e.forEach((e=>e.abort())),this._processingItems.clear(),this._cancelNext()}forEach(e){this._deferreds.forEach(((t,s)=>e(s)))}get(e){const t=this._deferreds.get(e);return t?t.promise:void 0}isOngoing(e){return this._processingItems.has(e)}has(e){return this._deferreds.has(e)}pause(){this._pausedSignal.value||(this._pausedSignal.value=!0,this._cancelNext())}push(e,t){const s=this.get(e);if(s)return s;const i=new AbortController;let r=null;t&&(r=(0,n.u7)(t,(()=>i.abort())));const o=()=>{l.remove(),null!=r&&r.remove(),this._removeItem(e),this._queue.remove(e),this._scheduleNext()},l=(0,n.NY)(i.signal,(()=>{const t=this._processingItems.get(e);t&&t.controller.abort(),o(),a.reject((0,n.NK)())})),a=(0,n.Tw)();return this._deferreds.set(e,a),this._controllers.set(e,i),a.promise.then(o,o),this._queue.push(e),this._scheduleNext(),a.promise}last(){return this._queue.last()}lastPromise(){const e=this.last();return e?this.get(e):null}peek(){return this._queue.peek()}popLast(){var e;const t=this._queue.popLast();return t&&(null!==(e=this._deferreds.get(t))&&void 0!==e&&e.reject((0,n.NK)()),this._removeItem(t)),t}reset(){const e=Array.from(this._processingItems.values());this._processingItems.clear();for(const t of e)this._queue.push(t.item),t.controller.abort();this._scheduleNext()}resume(){this._pausedSignal.value&&(this._pausedSignal.value=!1,this._scheduleNext())}takeAll(){const e=[];for(;this._queue.length;)e.push(this._queue.pop());return this.clear(),e}_removeItem(e){this._deferreds.delete(e),this._controllers.delete(e),this._processingItems.delete(e)}_scheduleNext(){this._pausedSignal.value||this._schedule||(this._schedule=(0,l._)((()=>{this._schedule=null,this._next()})))}_next(){for(;this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop())}_cancelNext(){this._schedule&&(this._schedule.remove(),this._schedule=null)}_processResult(e,t){this._canProcessFulfillment(e)&&(this._scheduleNext(),this._deferreds.get(e.item).resolve(t))}_processError(e,t){this._canProcessFulfillment(e)&&(this._scheduleNext(),this._deferreds.get(e.item).reject(t))}_canProcessFulfillment(e){return!!this._deferreds.get(e.item)&&this._processingItems.get(e.item)===e}_process(e){if(null==e)return;let t;const s=new AbortController,i=new u(e,s);this._processingItems.set(e,i);try{t=this.process(e,s.signal)}catch(r){this._processError(i,r)}(0,n.$X)(t)?(i.promise=t,t.then((e=>this._processResult(i,e)),(e=>this._processError(i,e)))):this._processResult(i,t)}}},36035:(e,t,s)=>{s.d(t,{i_:()=>n});var i=s(53430);function n(e,t,s){var n,l;t=null===(n=(0,i.rS)(t))||void 0===n?void 0:n.toLowerCase(),s=null===(l=(0,i.rS)(s))||void 0===l?void 0:l.toLowerCase();const a=e.map((e=>e.toLowerCase())),u=t?e[a.indexOf(t)]:null,d=s?e[a.indexOf(s)]:null;return{longitudeFieldName:u||e[a.indexOf(o.find((e=>a.includes(e))))],latitudeFieldName:d||e[a.indexOf(r.find((e=>a.includes(e))))]}}const r=["lat","lat83","latitude","latitude83","latdecdeg","lat_dd","y","ycenter","point_y"],o=["lon","lng","lng83","long","long83","longitude","longitude83","longdecdeg","long_dd","x","xcenter","point_x"]},77408:(e,t,s)=>{s.d(t,{h:()=>o,i:()=>r});var i=s(13312),n=s(1900);class r{static minimal(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return new r({geometryType:e,fieldsIndex:new n.A(s).toJSON(),featureIdInfo:{type:"object-id",fieldName:t},subtypes:null,subtypeField:null,types:null,globalIdField:null,spatialReference:null,outSpatialReference:null,timeInfo:null,timeReferenceUnknownClient:null,dateFieldsTimeZone:null,typeIdField:null})}static createFeature(e){return new r(e)}constructor(e){var t,s,r,o,l;let a;this._options=e,this._fieldsIndex=n.A.fromJSON(e.fieldsIndex),e.spatialReference&&(e.spatialReference instanceof i.A?this._spatialReference=e.spatialReference:this._spatialReference=i.A.fromJSON(e.spatialReference)),e.outSpatialReference&&(e.outSpatialReference instanceof i.A?this._outSpatialReference=e.outSpatialReference:this._outSpatialReference=i.A.fromJSON(e.outSpatialReference)),"object-id"===e.featureIdInfo.type&&(a=e.featureIdInfo.fieldName),this._arcadeSchema={fields:this.fieldsIndex.fields,fieldsIndex:this.fieldsIndex,geometryType:this.geometryType,objectIdField:a,globalIdField:this._options.globalIdField,spatialReference:this._spatialReference,timeInfo:this._options.timeInfo,typeIdField:null!==(t=this._options.typeIdField)&&void 0!==t?t:void 0,types:null!==(s=this._options.types)&&void 0!==s?s:void 0,subtypeField:this._options.subtypeField,subtypes:null!==(r=this._options.subtypes)&&void 0!==r?r:void 0,datesInUnknownTimezone:null!==(o=this._options.timeReferenceUnknownClient)&&void 0!==o?o:void 0,dateFieldsTimeZone:null!==(l=this._options.dateFieldsTimeZone)&&void 0!==l?l:void 0}}get fieldsIndex(){return this._fieldsIndex}get geometryType(){return"esriGeometryMultiPatch"===this._options.geometryType?"esriGeometryPolygon":this._options.geometryType}get serviceGeometryType(){return this._options.geometryType}get subtypeField(){return this._options.subtypeField}get timeInfo(){return this._options.timeInfo}get featureIdInfo(){return this._options.featureIdInfo}get globalIdField(){return this._options.globalIdField}get arcadeSchema(){return this._arcadeSchema}get spatialReference(){return this._spatialReference}get outSpatialReference(){return this._outSpatialReference}get timeReferenceUnknownClient(){return this._options.timeReferenceUnknownClient}weakCloneWithAdditionalFields(e){return new r({fieldsIndex:{fields:[...this._fieldsIndex.fields,...e],timeZoneByFieldName:null},geometryType:this.geometryType,globalIdField:this.globalIdField,featureIdInfo:this.featureIdInfo,spatialReference:this.spatialReference,outSpatialReference:this.outSpatialReference,subtypeField:this.subtypeField,subtypes:this._options.subtypes,timeInfo:this.timeInfo,timeReferenceUnknownClient:this.timeReferenceUnknownClient,dateFieldsTimeZone:this._options.dateFieldsTimeZone,typeIdField:this._options.typeIdField,types:this._options.types})}}class o extends r{static createGraphics(e){return new o({fieldsIndex:(new n.A).toJSON(),featureIdInfo:{type:"object-id",fieldName:"uid"},geometryType:null,spatialReference:e,outSpatialReference:e,globalIdField:null,subtypeField:null,subtypes:null,timeInfo:null,typeIdField:null,types:null,timeReferenceUnknownClient:null,dateFieldsTimeZone:null})}}},95341:(e,t,s)=>{s.r(t),s.d(t,{default:()=>G});var i=s(89379),n=s(19495),r=s(56218),o=s(10600),l=s(6326),a=s(19276),u=s(4212),d=s(50076),p=s(81806),c=s(76460),f=s(34429),h=s(13312),m=s(42294),y=s(12034),g=s(9345),_=s(40296),v=s(44135),I=s(1900),w=s(53430),R=s(98141),F=s(19208);function x(e){switch(e.type){case"wkb":return F.A.fromJSON(e);case"location":return R.A.fromJSON(e)}}var S=s(30178),b=s(67103),A=s(77859),C=s(61137),q=s(21666),O=s(77408),N=s(27428);const T=new A.Z,P=8e3,k="__OBJECTID";class G{constructor(){this._fileInfos=new Map,this._queue=new f.QueueProcessor({concurrency:4,process:(e,t)=>this._executeQuery(e,t)})}async load(e){var t,s,n,r,o,u,p,f,y,g,w;const R=e.spatialReference?h.A.fromJSON(e.spatialReference):void 0;if(R&&!R.isWGS84&&!R.isWebMercator)throw new d.A("parquet:unsupported-projection","Only WGS84 and Web Mercator are supported");const F=await(0,S.nc)({urls:new a.A(e.urls),fields:null===(t=e.fields)||void 0===t?void 0:t.map((e=>v.A.fromJSON(e))),encoding:e.encoding?x(e.encoding):e.encoding,geometryType:e.geometryType?(0,S.hG)(e.geometryType):null,spatialReference:R},{customParameters:e.customParameters});let A;if(F.geometryType&&F.encoding){if(!F.spatialReference)throw new d.A("parquet:unsupported","SpatialReference must be defined");if(!F.spatialReference.isGeographic&&!F.spatialReference.isWebMercator)throw new d.A("parquet:unsupported-projection","Only WGS84 and Web Mercator are supported");F.spatialReference.isGeographic&&!F.spatialReference.isWGS84&&(c.A.getLogger("parquet:unsupported-projection").warn("Found a geographic projection that is not WGS84. Handling as WGS84.",{spatialReference:F.spatialReference}),F.spatialReference=h.A.WGS84),A={geometryType:(0,S.sA)(F.geometryType),spatialReference:F.spatialReference.toJSON(),encoding:F.encoding.toJSON(),displayOptimization:F.displayOptimization}}this.setCustomParameters(e.customParameters),this._geometryInfo=A;const C=e.urls;for(const i of C){const e=await(0,b.DV)(i,{geometryInfo:A,outSpatialReference:null,getCustomParameters:()=>this._customParameters});this._fileInfos.set(i,{index:this._fileInfos.size,file:e})}this._capabilities=z(await this.getFileStatistics());const q=null===(s=this._fileInfos.values().next().value)||void 0===s?void 0:s.file;if(!q)return{layerDefinition:{},capabilities:z(null)};const{fields:N}=F;if(null==N)throw new d.A("parquet-layer:missing-metadata","Unable to create parquet source: cannot infer fields",N);N.push(new v.A({name:k,type:"oid",alias:k}));const T={fields:N.map((e=>(0,i.A)((0,i.A)({},e.toJSON()),{},{column:q.columnForFieldName(e.name)}))),timeZoneByFieldName:null},P=I.A.fromJSON(T);this._fieldsIndex=P;const G=(0,S.sA)(null!==(n=F.geometryType)&&void 0!==n?n:"point");if(this._metadata=O.i.createFeature({fieldsIndex:T,geometryType:G,featureIdInfo:{type:"object-id",fieldName:"rowId"},subtypes:null,subtypeField:null,types:null,typeIdField:null,globalIdField:null,spatialReference:F.spatialReference,outSpatialReference:null,timeInfo:null,timeReferenceUnknownClient:null,dateFieldsTimeZone:null}),this._queryEngineParams={fieldsIndex:this._metadata.fieldsIndex,geometryType:null!==(r=null===(o=A)||void 0===o?void 0:o.geometryType)&&void 0!==r?r:"esriGeometryPoint",featureIdInfo:{type:"object-id",fieldName:"rowId"},hasM:!1,hasZ:!1,spatialReference:null!==(u=null===(p=A)||void 0===p?void 0:p.spatialReference)&&void 0!==u?u:{wkid:4326},aggregateAdapter:null,timeInfo:null,definitionExpression:null},F.spatialReference&&(this._fullExtent=function(e,t){const s=(0,m.hZ)((0,m.vt)(),m.qv);for(const i of e){const e=(0,b.hD)(i.file);if(!e)return null;const t=e.columns[e.primary_column];if(!t.bbox)return null;const n=E(t.bbox);(0,m.RF)(s,n)}return{xmin:s[0],ymin:s[1],xmax:s[3],ymax:s[4],spatialReference:t}}(this._fileInfos.values(),F.spatialReference.toJSON())),null==this._fullExtent&&"location"===(null===(f=F.encoding)||void 0===f?void 0:f.type)){var Q,j,M;const{latitudeFieldName:e,longitudeFieldName:t}=F.encoding,s=null===(Q=this._fieldsIndex.get(e))||void 0===Q?void 0:Q.column,i=null===(j=this._fieldsIndex.get(t))||void 0===j?void 0:j.column,n=(0,m.hZ)((0,m.vt)(),m.qv);for(const r of this._fileInfos.values())for(const e of r.file.rowGroups()){const t={stack:[],error:void 0,hasError:!1};try{const r=(0,l.mS)(t,e.columnDescriptorForAttribute(s),!1),o=(0,l.mS)(t,e.columnDescriptorForAttribute(i),!1),a=[o.minValue(),r.minValue(),o.maxValue(),r.maxValue()];(0,m.DC)(n,a),e.free()}catch(D){t.error=D,t.hasError=!0}finally{(0,l.hk)(t)}}this._fullExtent={xmin:n[0],ymin:n[1],xmax:n[3],ymax:n[4],spatialReference:null===(M=F.spatialReference)||void 0===M?void 0:M.toJSON()}}return{capabilities:this._capabilities,layerDefinition:{fields:null===(y=F.fields)||void 0===y?void 0:y.map((e=>e.toJSON())),drawingInfo:(0,_.F0)(G),extent:null!==(g=this._fullExtent)&&void 0!==g?g:void 0,geometryType:G,encoding:null===(w=F.encoding)||void 0===w?void 0:w.toJSON(),displayOptimization:F.displayOptimization}}}destroy(){for(const e of this._fileInfos.values())e.file.free();this._fileInfos.clear(),this._queue.destroy()}setCustomParameters(e){this._customParameters=e}getFileStatistics(){if(!this._fileInfos.size)return null;const e=Array.from(this._fileInfos.values()).reduce(((e,t)=>e+t.file.byteLength()),0);return{featureCount:this._getFeatureCount(),byteLength:e}}async updateFiles(e){const t=new Set(e);for(const[s,i]of this._fileInfos.entries())t.has(s)?t.delete(s):(i.file.free(),this._fileInfos.delete(s));for(const s of t){const e=await(0,b.DV)(s,{geometryInfo:this._geometryInfo,outSpatialReference:null,getCustomParameters:()=>this._customParameters});this._fileInfos.set(s,{index:this._fileInfos.size,file:e})}}async queryFeatures(e,t){var s;return this._validateQuery(e),function(e){var t,s;return!!(null!==(t=e.objectIds)&&void 0!==t&&t.length||e.outStatistics||null!==(s=e.orderByFields)&&void 0!==s&&s.length||e.returnDistinctValues)}(e)||(e.resultRecordCount=e.resultRecordCount?Math.min(e.resultRecordCount,8e3):8e3,e.resultOffset=null!==(s=e.resultOffset)&&void 0!==s?s:0),(e.outStatistics||e.returnDistinctValues)&&delete e.returnGeometry,(await this._enqueueQuery(e,t)).createQueryResponse()}async queryFeatureCount(e,t){return this._validateQuery(e),Q(e)?(delete e.outFields,delete e.returnGeometry,(await this._enqueueQuery(e,t)).createQueryResponseForCount()):this._getFeatureCount()}async queryObjectIds(e,t){var s;return this._validateQuery(e),Q(e)?(e.resultRecordCount=e.resultRecordCount?Math.min(e.resultRecordCount,8e3):8e3,e.resultOffset=null!==(s=e.resultOffset)&&void 0!==s?s:0,delete e.returnGeometry,delete e.outFields,(await this._enqueueQuery(e,t)).items.map((e=>e.getObjectId()))):Array.from({length:this._getFeatureCount()},((e,t)=>t))}async queryExtent(e,t){if(this._validateQuery(e),this._fullExtent&&!Q(e))return{count:this._getFeatureCount(),extent:this._fullExtent};const s=(0,u.zI)(this._metadata.spatialReference);e.returnGeometry=!0,delete e.outFields;const i=(0,m.hZ)((0,m.vt)(),m.qv),n=(0,m.vt)(),r=await this._enqueueQuery(e,t);let o=0;for(const l of r.items)l.getBounds(n)&&((0,m.RF)(i,n),o+=1);return{count:o,extent:(0,y.Wc)(i,s,e.outSR?(0,u.zI)(e.outSR):s,s,!1)}}_getFeatureCount(){return Array.from(this._fileInfos.values()).reduce(((e,t)=>e+t.file.numRows()),0)}_validateQuery(e){var t;if(!this._capabilities.query.supportsStatistics&&e.outStatistics)throw new d.A("parquet:unsupported","Statistics queries are not supported",{query:e});if(!this._capabilities.query.supportsOrderBy&&null!==(t=e.orderByFields)&&void 0!==t&&t.length)throw new d.A("parquet:unsupported","Queries using orderBy are not supported",{query:e});if(!this._capabilities.query.supportsDistinct&&e.returnDistinctValues)throw new d.A("parquet:unsupported","Queries using returnDistinctValues are not supported",{query:e})}_fetchChunks(e,t){var s=this;return(0,o.A)((function*(){for(const i of s._fileInfos.values()){const n=i.file.numRows(),o=Math.ceil(n/P);for(let l=0;l<o;l++){const n=l*P,o=yield(0,r.A)(i.file.readChunk(n,P,e.fields,e.returnGeometry,t));for(const e of o){const t=new N.s(s._metadata,s._fieldsIndex,e,0,i.index),n=j([new C.j(t,null,0,!1)],s._queryEngineParams);yield n}}}}))()}_enqueueQuery(e,t){return this._queue.push(e,t)}async _executeQuery(e,t){var s,i,r;const o=await this._getReadParams(e);if(null!==(s=e.objectIds)&&void 0!==s&&s.length)for(const n of this._fileInfos.values()){const s=[],i=j((await n.file.readChunksByRowId(new Uint32Array(e.objectIds),o.fields,o.returnGeometry,t)).map(((e,t)=>new N.s(this._metadata,this._fieldsIndex,e,t,n.index))).map(((e,t)=>new C.j(e,null,t,!1))),this._queryEngineParams),r=await i.executeQueryForOpaqueFeatures(e,t);for(const e of r)s.push(e);return new g.G(s,e,{fieldsIndex:this._fieldsIndex,geometryType:this._metadata.geometryType,spatialReference:this._queryEngineParams.spatialReference,objectIdField:"rowId",hasM:!1,hasZ:!1,featureAdapter:T})}let l=null!==(i=e.resultRecordCount)&&void 0!==i?i:this._getFeatureCount(),a=null!==(r=e.resultOffset)&&void 0!==r?r:0;delete e.resultRecordCount,delete e.resultOffset;const u=[];var d,p=!1,c=!1;try{for(var f,h=(0,n.A)(this._fetchChunks(o,t));p=!(f=await h.next()).done;p=!1){const s=f.value;{const i=await s.executeQueryForOpaqueFeatures(e,t);if(i.length>a){const t=i.slice(a,Math.min(a+l,i.length));for(const e of t)u.push(e);if(a=0,l-=t.length,0===l)return new g.G(u,e,{fieldsIndex:this._fieldsIndex,geometryType:this._metadata.geometryType,spatialReference:this._queryEngineParams.spatialReference,objectIdField:"rowId",hasM:!1,hasZ:!1,featureAdapter:T})}else a-=i.length}}}catch(m){c=!0,d=m}finally{try{p&&null!=h.return&&await h.return()}finally{if(c)throw d}}return new g.G(u,e,{fieldsIndex:this._fieldsIndex,geometryType:this._metadata.geometryType,spatialReference:this._queryEngineParams.spatialReference,objectIdField:"rowId",hasM:!1,hasZ:!1,featureAdapter:T})}async _getReadParams(e){const t=new Set;if(e.where&&await(0,w.hz)(t,this._fieldsIndex,e.where),e.outStatistics)for(const s of e.outStatistics)null!=s.onStatisticField&&t.add(s.onStatisticField);if(e.outFields)for(const s of e.outFields)t.add(s);return{fields:this._getAttributeIds(Array.from(t)),returnGeometry:!!e.returnGeometry||!!e.geometry}}_getAttributeIds(e){if(null==e)return new Uint32Array;if(e.includes("*"))return new Uint32Array(this._fieldsIndex.fields.map((e=>e.column)).filter((e=>null!=e)));const t=[];for(const s of e){const e=this._fieldsIndex.get(s);if(null==e)throw new d.A("unknown-field","Field ".concat(s," does not exist"));null==e.column||t.push(e.column)}return new Uint32Array(t)}}function Q(e){return Object.keys(e).some((e=>function(e){switch(e){case"resultOffset":case"resultRecordCount":case"aggregateIds":case"distance":case"gdbVersion":case"geometry":case"having":case"timeExtent":case"where":case"objectIds":case"historicMoment":return!0;default:return!1}}(e)))}function j(e,t){const s=new q.I;for(const i of e)s.insert(i);return new y.do((0,i.A)((0,i.A)({},t),{},{featureStore:s}))}function E(e){switch(e.length){case 4:return(0,m.Jt)((0,m.vt)(),e);case 6:return e;default:throw new d.A("parquet:protocol-violation","Invalid Geoparquet file. BoundingBox size must be 4 or 6.",{bbox:e})}}function z(e){const t=null===e||void 0===e?void 0:e.featureCount;let s=!1;return null!=t&&t<(0,p.A)("parquetlayer-full-query-feature-count")&&(s=!0),{analytics:{supportsCacheHint:!1},attachment:null,data:{isVersioned:!1,isBranchVersioned:!1,supportsAttachment:!1,supportsM:!1,supportsZ:!1},metadata:{supportsAdvancedFieldProperties:!1},operations:{supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:!1,supportsDelete:!1,supportsEditing:!1,supportsChangeTracking:!1,supportsQuery:!0,supportsQueryBins:!1,supportsQueryPivot:!1,supportsQueryAnalytics:!1,supportsQueryAttachments:!1,supportsQueryTopFeatures:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsUpdate:!1,supportsExceedsLimitStatistics:!1,supportsAsyncConvert3D:!1},query:{maxRecordCount:8e3,maxRecordCountFactor:void 0,maxUniqueIDCount:void 0,standardMaxRecordCount:void 0,supportsCacheHint:!1,supportsCentroid:!0,supportsCentroidOnDegeneratedQuantizedGeometry:!1,supportsCurrentUser:!1,supportsDegeneratedQuantizedGeometry:!1,supportsDisjointSpatialRelationship:!1,supportsDistance:!1,supportsDistinct:s,supportsExtent:!1,supportsFormatPBF:!1,supportsGeometryProperties:!1,supportsHavingClause:!1,supportsHistoricMoment:!1,supportsMaxRecordCountFactor:!1,supportsOrderBy:s,supportsPagination:!0,supportsPaginationOnAggregatedQueries:!1,supportsPercentileStatistics:!1,supportsQuantization:!0,supportsQuantizationEditMode:!1,supportsQueryByAnonymous:!1,supportsQueryByOthers:!1,supportsQueryGeometry:!1,supportsResultType:!1,supportsReturnMesh:!1,supportsStandardizedQueriesOnly:!1,supportsTopFeaturesQuery:!1,supportsStatistics:s,supportsSpatialAggregationStatistics:!1,supportedSpatialAggregationStatistics:{envelope:!1,centroid:!1,convexHull:!1},supportsDefaultSpatialReference:!1,supportsFullTextSearch:!1,supportsCompactGeometry:!1,supportsSqlExpression:!1,supportsTrueCurve:!1,tileMaxRecordCount:void 0},queryAttributeBins:{supportsDate:!1,supportsFixedInterval:!1,supportsAutoInterval:!1,supportsFixedBoundaries:!1,supportsStackBy:!1,supportsSplitBy:!1,supportsSnapToData:!1,supportsReturnFullIntervalBin:!1,supportsFirstDayOfWeek:!1,supportsNormalization:!1},queryRelated:{supportsCount:!1,supportsOrderBy:!1,supportsPagination:!1,supportsCacheHint:!1},queryTopFeatures:{supportsCacheHint:!1},editing:{supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,supportsGeometryUpdate:!1,supportsGlobalId:!1,supportsReturnServiceEditsInSourceSpatialReference:!1,supportsRollbackOnFailure:!1,supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1,supportsUploadWithItemId:!1,supportsUpdateWithoutM:!1,supportsAsyncApplyEdits:!1,zDefault:void 0}}}},98141:(e,t,s)=>{s.d(t,{A:()=>l});var i=s(6326),n=s(42553),r=s(46053),o=(s(81806),s(76460),s(47249),s(87990));let l=class extends n.o{constructor(e){super(e),this.type="location",this.latitudeFieldName=null,this.longitudeFieldName=null}};(0,i.Cg)([(0,r.MZ)({type:["location"],readOnly:!0,json:{write:!0}})],l.prototype,"type",void 0),(0,i.Cg)([(0,r.MZ)({json:{write:!0}})],l.prototype,"latitudeFieldName",void 0),(0,i.Cg)([(0,r.MZ)({json:{write:!0}})],l.prototype,"longitudeFieldName",void 0),l=(0,i.Cg)([(0,o.$)("esri.layers.support.ParquetEncodingLocation")],l)}}]);
//# sourceMappingURL=95341.364de5d8.chunk.js.map